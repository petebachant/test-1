stages:
  run-main-notebook:
    cmd: calkit nb execute --environment main --no-check --language 
      python --to html "notebooks/main.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/main.ipynb
      - data/raw/penguins.csv
      - uv.lock
    outs:
      - figures:
          cache: false
          persist: false
      - tables:
          cache: false
          persist: false
      - results/vif.json:
          cache: false
          persist: false
      - .calkit/notebooks/html/notebooks/main.html:
          cache: false
    desc: Automatically generated from the 'run-main-notebook' stage 
      in calkit.yaml. Changes made here will be overwritten.
  map-paths:
    cmd: calkit map-paths --dir-to-dir-merge 'figures->paper/figures' 
      --dir-to-dir-merge 'figures->pubs/conf-paper-1/figures' 
      --dir-to-dir-replace 'tables->paper/tables' --dir-to-dir-replace
      'tables->pubs/conf-paper-1/tables'
    deps:
      - figures
      - figures
      - tables
      - tables
    outs:
      - paper/figures:
          cache: false
          persist: true
      - pubs/conf-paper-1/figures:
          cache: false
          persist: true
      - paper/tables:
          cache: false
          persist: true
      - pubs/conf-paper-1/tables:
          cache: false
          persist: true
    desc: Automatically generated from the 'map-paths' stage in 
      calkit.yaml. Changes made here will be overwritten.
  results-to-latex:
    cmd: "calkit latex from-json 'results/vif.json' --output 'paper/results.tex'
      --output 'pubs/conf-paper-1/results.tex' --format-json '{\"super_cool_result\"\
      : \"{bill_length_mm:.2f}\"}'"
    deps:
      - results/vif.json
    outs:
      - paper/results.tex:
          cache: false
          persist: false
      - pubs/conf-paper-1/results.tex:
          cache: false
          persist: false
    desc: Automatically generated from the 'results-to-latex' stage in
      calkit.yaml. Changes made here will be overwritten.
  build-paper:
    cmd: calkit latex build -e tex --no-check paper/paper.tex
    deps:
      - paper/paper.tex
      - paper/references.bib
      - paper/figures
      - .calkit/env-locks/tex
    outs:
      - paper/paper.pdf
    desc: Automatically generated from the 'build-paper' stage in 
      calkit.yaml. Changes made here will be overwritten.
  build-conf-paper-1:
    cmd: calkit latex build -e tex --no-check 
      pubs/conf-paper-1/main.tex
    deps:
      - pubs/conf-paper-1/main.tex
      - pubs/conf-paper-1/tables
      - pubs/conf-paper-1/references.bib
      - pubs/conf-paper-1/results.tex
      - pubs/conf-paper-1/figures
      - .calkit/env-locks/tex
    outs:
      - pubs/conf-paper-1/main.pdf
    desc: Automatically generated from the 'build-conf-paper-1' stage 
      in calkit.yaml. Changes made here will be overwritten.
